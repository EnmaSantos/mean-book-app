<h2>Add New Book</h2>

<form [formGroup]="bookForm" (ngSubmit)="onSubmit()">

  <div>
    <label for="title">Title:</label>
    <input id="title" type="text" formControlName="title">
    <div *ngIf="title?.invalid && (title?.dirty || title?.touched)" style="color: red;">
      <small *ngIf="title?.errors?.['required']">Title is required.</small>
      <small *ngIf="title?.errors?.['minlength']">Title must be at least 3 characters long.</small>
    </div>
  </div>

  <div>
    <label for="author">Author:</label>
    <input id="author" type="text" formControlName="author">
    <div *ngIf="author?.invalid && (author?.dirty || author?.touched)" style="color: red;">
      <small *ngIf="author?.errors?.['required']">Author is required.</small>
    </div>
  </div>

  <div>
    <label for="genre">Genre:</label>
    <input id="genre" type="text" formControlName="genre">
  </div>

  <div>
    <label for="publicationYear">Publication Year:</label>
    <input id="publicationYear" type="number" formControlName="publicationYear">
     <div *ngIf="publicationYear?.invalid && (publicationYear?.dirty || publicationYear?.touched)" style="color: red;">
       <small *ngIf="publicationYear?.errors?.['min'] || publicationYear?.errors?.['max']">Please enter a valid year.</small>
     </div>
  </div>

  <div>
    <button type="submit" [disabled]="bookForm.invalid || isSubmitting">
      {{ isSubmitting ? 'Adding...' : 'Add Book' }}
    </button>
  </div>

   <div *ngIf="errorMessage" style="color: red; margin-top: 10px;">
     <p>Error: {{ errorMessage }}</p>
   </div>

</form>

<div>
  <a routerLink="/">Cancel</a> </div>